"use strict";(self.webpackChunkproject_dm_tech=self.webpackChunkproject_dm_tech||[]).push([[504],{504:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ce});var r=t(848),c="RJhdH5Eb",a="q3mpKvmT",s=t(540),i=t(297),l=t(397),o=t(282),u=t(752),d=t(558),f="bEwDLCM8",h="jJPhYLqH",p="BMUQx4Cx",v="bjhzY4ul",x="fnWFQt1F",m="wzxD4K5u",j="bmxAV5kC",y="czOg2Es1",b="V0owx1WX",N="WNu0i7yb",g="FuIr6H14",O=t(428),w=function(){return w=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var c in n=arguments[t])Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c]);return e},w.apply(this,arguments)},k=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)n.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(t[r[c]]=e[r[c]])}return t};function P(e){var n=e.src,t=e.alt,c=k(e,["src","alt"]),a=(0,s.useState)(O),i=a[0],l=a[1];return(0,s.useEffect)((function(){if(n){var e=new Image;e.src=n,e.onload=function(){return l(n)},e.onerror=function(){return l(O)}}}),[n]),(0,r.jsx)("img",w({},c,{className:g,src:i,alt:t}))}var S="u_l5T5t9",C="YCi0AZh7",A="Vnr7ndL9",E="U6KBRG9S",V="SYURHIrm",I=t(764),W=function(){return W=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var c in n=arguments[t])Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c]);return e},W.apply(this,arguments)},G=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)n.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(t[r[c]]=e[r[c]])}return t};function M(e){var n=e.closeModal,t=e.insert,c=e.overlay,a=G(e,["closeModal","insert","overlay"]),i=(0,s.useState)(!1),l=i[0],o=i[1];return(0,s.useEffect)((function(){o((function(e){return!e}))}),[]),(0,r.jsxs)(r.Fragment,{children:[c?(0,r.jsx)("div",{className:"".concat(A," ").concat(l?E:null)}):null,(0,r.jsxs)("div",W({},a,{className:"".concat(S," ").concat(l?C:null),children:[(0,r.jsx)("div",{className:V,children:(0,r.jsx)(I.A,{show:l,onClick:function(){o((function(e){return!e})),setTimeout(n,300)}})}),t]}))]})}var q="B2GV_QfM",F="p8ndClWd",D="IW1PsUzi",L="PCmUaiiX",U="aqpoupO7",Y="Y2BSuS6V",_="koFS2tNn",H="AxSpG1eV",z="tyk8Wmg2",B="X7LDVV9m",Q=t(767),T=t(152),X=t(523);function K(e){var n=e.data,t=n.product,c=t.id,a=t.title,s=t.price,i=t.picture,l=n.quantity,o=(0,Q.Zp)();return(0,r.jsxs)("div",{className:L,onClick:function(){o("".concat(X.A.product(),"/").concat(c))},children:[(0,r.jsx)("div",{className:U,children:(0,r.jsx)(P,{src:i,alt:"product image"})}),(0,r.jsx)("div",{className:B,children:a}),(0,r.jsx)("div",{className:z,children:"".concat(l," шт")}),(0,r.jsxs)("div",{className:Y,children:[(0,r.jsxs)("div",{className:H,children:[s&&(0,T.A)(s)," ₽ за шт"]}),(0,r.jsxs)("div",{className:_,children:[s&&(0,T.A)(s*l)," ₽"]})]})]})}var R=t(707);function J(e){var n=e.order,t=e.orderIndex,c=e.handleClick,a=(0,i.jL)(),l=(0,s.useState)([]),o=l[0],d=l[1];return(0,s.useEffect)((function(){var e=n.map((function(e){return{id:e.product.id,quantity:e.quantity}}));d(e)}),[n]),(0,r.jsxs)("div",{className:D,children:[(0,r.jsxs)("div",{className:q,children:["Состав заказа № ",t]}),(0,r.jsx)("ul",{className:F,children:n.map((function(e,n){return(0,r.jsx)("li",{children:(0,r.jsx)(K,{data:e})},n)}))}),(0,r.jsx)(R.A,{style:{maxWidth:"300px",alignSelf:"end"},text:"Добавить в корзину",onClick:function(){c(),a((0,u.UD)(o))}})]})}var Z=t(319),$=t(300);function ee(e){var n,t,c,a,i,l=e.order,o=e.orderIndex,u=(0,Z.A)(),d=u.isOpenPortal,g=u.openPortal,O=u.closePortal,w=u.Portal,k=(0,s.useState)(0),S=k[0],C=k[1],A=(0,s.useState)(8),E=A[0],V=A[1],I=(0,s.useState)(464),W=I[0],G=I[1],q=(0,$.A)()[0];return(0,s.useEffect)((function(){C(l.reduce((function(e,n){return e+n.quantity*n.product.price}),0))}),[l]),(0,s.useEffect)((function(){q>900&&(G(464),V(8)),q>600&&q<900&&(G(264),V(4)),q<600&&(G(124),V(2))}),[q]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:m,onClick:g,children:[(0,r.jsxs)("div",{className:b,children:[(0,r.jsx)("div",{className:v,children:"Заказ"}),(0,r.jsxs)("div",{className:x,children:["№ ",o]})]}),(0,r.jsx)("div",{style:{minWidth:"".concat(W),maxWidth:"".concat(W)},className:j,children:l.map((function(e,n){return n<E?(0,r.jsx)("div",{className:h,children:(0,r.jsx)(P,{src:e.product.picture,alt:"product image"})},n):n===l.length-1?(0,r.jsx)("div",{className:f,children:"..."},n):null}))}),(0,r.jsx)("div",{className:y,children:(0,r.jsxs)("div",{className:p,children:[(0,r.jsx)("div",{className:v,children:"Оформлено"}),(0,r.jsx)("div",{className:N,children:(n=l[0].createdAt,t=new Date(n),c=t.getDate(),a=t.getMonth()+1,i=t.getFullYear(),"".concat(c," ").concat(["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][a-1]," ").concat(i))}),(0,r.jsx)("div",{className:v,children:"На сумму"}),(0,r.jsxs)("div",{className:N,children:[(0,T.A)(S)," ₽"]})]})})]}),d&&(0,r.jsx)(w,{children:(0,r.jsx)(M,{insert:(0,r.jsx)(J,{order:l,orderIndex:o,handleClick:O}),overlay:!0,closeModal:O})})]})}var ne=t(579),te=function(e,n,t,r){return new(t||(t=Promise))((function(c,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?c(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},re=function(e,n){var t,r,c,a,s={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(t=1,r&&(c=2&i[0]?r.return:i[0]?r.throw||((c=r.return)&&c.call(r),0):r.next)&&!(c=c.call(r,i[1])).done)return c;switch(r=0,c&&(i=[2&i[0],c.value]),i[0]){case 0:case 1:c=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((c=(c=s.trys).length>0&&c[c.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!c||i[1]>c[0]&&i[1]<c[3])){s.label=i[1];break}if(6===i[0]&&s.label<c[1]){s.label=c[1],c=i;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(i);break}c[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],r=0}finally{t=c=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};function ce(){var e=this,n=(0,i.jL)(),t=(0,i.GV)(o.ee),f=(0,i.GV)(o.hk),h=(0,i.GV)(o.Qx),p=(0,i.GV)(o.uP),v=(0,i.GV)(d.MX),x=(0,ne.A)({func:function(){return te(e,void 0,void 0,(function(){return re(this,(function(e){switch(e.label){case 0:return"successfully"===p&&h>f.limit*(f.currentPage-1)?[4,n((0,l.WF)({page:f.currentPage,limit:f.limit}))]:[3,2];case 1:e.sent(),n((0,l.M2)()),e.label=2;case 2:return[2]}}))}))}}).targetElement;return(0,s.useEffect)((function(){v.data.length&&n((0,u.iH)({data:v.data}))}),[v.data,n]),(0,r.jsx)("section",{ref:x,className:c,children:(0,r.jsx)("div",{className:a,children:t.data.map((function(e,n){return(0,r.jsx)(ee,{order:e,orderIndex:n+1,handleClickOrder:function(){return null}},n)}))})})}}}]);
//# sourceMappingURL=504.446ebb4fdb2b6e309029.js.map