"use strict";(self.webpackChunkproject_dm_tech=self.webpackChunkproject_dm_tech||[]).push([[504],{504:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ce});var r=n(848),c="RJhdH5Eb",a="q3mpKvmT",s=n(540),i=n(297),l=n(397),o=n(282),u=n(752),d=n(558),f="bEwDLCM8",h="jJPhYLqH",p="BMUQx4Cx",v="bjhzY4ul",x="fnWFQt1F",m="wzxD4K5u",j="bmxAV5kC",y="czOg2Es1",b="V0owx1WX",g="WNu0i7yb",N="FuIr6H14",O=n(428),w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var c in t=arguments[n])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e},w.apply(this,arguments)},k=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)t.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(n[r[c]]=e[r[c]])}return n};function P(e){var t=e.src,n=e.alt,c=k(e,["src","alt"]),a=(0,s.useState)(O),i=a[0],l=a[1];return(0,s.useEffect)((function(){if(t){var e=new Image;e.src=t,e.onload=function(){return l(t)},e.onerror=function(){return l(O)}}}),[t]),(0,r.jsx)("img",w({},c,{className:N,src:i,alt:n}))}var S="u_l5T5t9",C="YCi0AZh7",V="Vnr7ndL9",A="U6KBRG9S",E="SYURHIrm",G=n(764),I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var c in t=arguments[n])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e},I.apply(this,arguments)},W=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)t.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(n[r[c]]=e[r[c]])}return n};function M(e){var t=e.closeModal,n=e.insert,c=e.overlay,a=W(e,["closeModal","insert","overlay"]),i=(0,s.useState)(!1),l=i[0],o=i[1];return(0,s.useEffect)((function(){o((function(e){return!e}))}),[]),(0,r.jsxs)(r.Fragment,{children:[c?(0,r.jsx)("div",{className:"".concat(V," ").concat(l?A:null)}):null,(0,r.jsxs)("div",I({},a,{className:"".concat(S," ").concat(l?C:null),children:[(0,r.jsx)("div",{className:E,children:(0,r.jsx)(G.A,{show:l,onClick:function(){o((function(e){return!e})),setTimeout(t,300)}})}),n]}))]})}var q="B2GV_QfM",F="p8ndClWd",D="IW1PsUzi",H="PCmUaiiX",L="aqpoupO7",U="Y2BSuS6V",Y="koFS2tNn",_="AxSpG1eV",z="tyk8Wmg2",B="X7LDVV9m",Q=n(767),T=n(152),X=n(523);function K(e){var t=e.data,n=t.product,c=n.id,a=n.title,s=n.price,i=n.picture,l=t.quantity,o=(0,Q.Zp)();return(0,r.jsxs)("div",{className:H,onClick:function(){o("".concat(X.A.product(),"/").concat(c))},children:[(0,r.jsx)("div",{className:L,children:(0,r.jsx)(P,{src:i,alt:"product image"})}),(0,r.jsx)("div",{className:B,children:a}),(0,r.jsx)("div",{className:z,children:"".concat(l," шт")}),(0,r.jsxs)("div",{className:U,children:[(0,r.jsxs)("div",{className:_,children:[s&&(0,T.A)(s)," ₽ за шт"]}),(0,r.jsxs)("div",{className:Y,children:[s&&(0,T.A)(s*l)," ₽"]})]})]})}var R=n(707);function J(e){var t=e.order,n=e.orderIndex,c=e.handleClick,a=(0,i.jL)(),l=(0,s.useState)([]),o=l[0],d=l[1];return(0,s.useEffect)((function(){var e=t.map((function(e){return{id:e.product.id,quantity:e.quantity}}));d(e)}),[t]),(0,r.jsxs)("div",{className:D,children:[(0,r.jsxs)("div",{className:q,children:["Состав заказа № ",n]}),(0,r.jsx)("ul",{className:F,children:t.map((function(e,t){return(0,r.jsx)("li",{children:(0,r.jsx)(K,{data:e})},t)}))}),(0,r.jsx)(R.A,{style:{maxWidth:"300px",alignSelf:"end"},text:"Добавить в корзину",onClick:function(){c(),a((0,u.UD)(o))}})]})}var Z=n(319),$=n(300);function ee(e){var t,n,c,a,i,l=e.order,o=e.orderIndex,u=(0,Z.A)(),d=u.isOpenPortal,N=u.openPortal,O=u.closePortal,w=u.Portal,k=(0,s.useState)(0),S=k[0],C=k[1],V=(0,s.useState)(8),A=V[0],E=V[1],G=(0,s.useState)(464),I=G[0],W=G[1],q=(0,$.A)()[0];return(0,s.useEffect)((function(){C(l.reduce((function(e,t){return e+t.quantity*t.product.price}),0))}),[l]),(0,s.useEffect)((function(){q>900&&(W(464),E(8)),q>600&&q<900&&(W(264),E(4)),q<600&&(W(124),E(2))}),[q]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:m,onClick:N,children:[(0,r.jsxs)("div",{className:b,children:[(0,r.jsx)("div",{className:v,children:"Заказ"}),(0,r.jsxs)("div",{className:x,children:["№ ",o]})]}),(0,r.jsx)("div",{style:{minWidth:"".concat(I),maxWidth:"".concat(I)},className:j,children:l.map((function(e,t){return t<A?(0,r.jsx)("div",{className:h,children:(0,r.jsx)(P,{src:e.product.picture,alt:"product image"})},t):t===l.length-1?(0,r.jsx)("div",{className:f,children:"..."},t):null}))}),(0,r.jsx)("div",{className:y,children:(0,r.jsxs)("div",{className:p,children:[(0,r.jsx)("div",{className:v,children:"Оформлено"}),(0,r.jsx)("div",{className:g,children:(t=l[0].createdAt,n=new Date(t),c=n.getDate(),a=n.getMonth()+1,i=n.getFullYear(),"".concat(c," ").concat(["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][a-1]," ").concat(i))}),(0,r.jsx)("div",{className:v,children:"На сумму"}),(0,r.jsxs)("div",{className:g,children:[(0,T.A)(S)," ₽"]})]})})]}),d&&(0,r.jsx)(w,{children:(0,r.jsx)(M,{insert:(0,r.jsx)(J,{order:l,orderIndex:o,handleClick:O}),overlay:!0,closeModal:O})})]})}var te=n(579),ne=function(e,t,n,r){return new(n||(n=Promise))((function(c,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}l((r=r.apply(e,t||[])).next())}))},re=function(e,t){var n,r,c,a,s={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(c=2&i[0]?r.return:i[0]?r.throw||((c=r.return)&&c.call(r),0):r.next)&&!(c=c.call(r,i[1])).done)return c;switch(r=0,c&&(i=[2&i[0],c.value]),i[0]){case 0:case 1:c=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((c=(c=s.trys).length>0&&c[c.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!c||i[1]>c[0]&&i[1]<c[3])){s.label=i[1];break}if(6===i[0]&&s.label<c[1]){s.label=c[1],c=i;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(i);break}c[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=c=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};function ce(){var e=this,t=(0,i.jL)(),n=(0,i.GV)(o.ee),f=(0,i.GV)(o.hk),h=(0,i.GV)(o.Qx),p=(0,i.GV)(o.uP),v=(0,i.GV)(d.MX),x=(0,i.GV)(d.VH),m=(0,te.A)({func:function(){return ne(e,void 0,void 0,(function(){return re(this,(function(e){switch(e.label){case 0:return"successfully"===p&&h>f.limit*(f.currentPage-1)?[4,t((0,l.WF)({page:f.currentPage,limit:f.limit}))]:[3,2];case 1:e.sent(),t((0,l.M2)()),e.label=2;case 2:return[2]}}))}))}}).targetElement;return(0,s.useEffect)((function(){(v.data.length||1===x.length&&!v.data.length)&&t((0,u.iH)({data:v.data}))}),[x.length,v.data,t]),(0,r.jsx)("section",{ref:m,className:c,children:(0,r.jsx)("div",{className:a,children:n.data.map((function(e,t){return(0,r.jsx)(ee,{order:e,orderIndex:t+1,handleClickOrder:function(){return null}},t)}))})})}}}]);
//# sourceMappingURL=504.26096c7fd27d265de684.js.map