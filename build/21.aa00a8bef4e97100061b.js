"use strict";(self.webpackChunkproject_dm_tech=self.webpackChunkproject_dm_tech||[]).push([[21],{21:(e,n,t)=>{t.r(n),t.d(n,{default:()=>re});var r=t(848),c="RJhdH5Eb",a="q3mpKvmT",s=t(297),i=t(397),l=t(282),o=t(579),u="wfpSYN4I",d="JPUmfREx",f=t(540),h=t(319),p="t8yRv5Bx",v="wAKe8OAx",x="SlwPozbl";function j(e){var n=e.orderNum;return(0,r.jsxs)("div",{className:v,children:[(0,r.jsx)("div",{className:p,children:"Заказ"}),(0,r.jsxs)("div",{className:x,children:["№ ",n]})]})}var m="_ulay8yp",y="IpAfXoLA",b="YfryxDnn",N=t(300),w=t(483);function g(e){var n=e.pictures,t=(0,f.useState)(8),c=t[0],a=t[1],s=(0,f.useState)(464),i=s[0],l=s[1],o=(0,N.A)()[0];return(0,f.useEffect)((function(){o>900&&(l(464),a(8)),o>600&&o<900&&(l(264),a(4)),o<600&&(l(124),a(2))}),[o]),(0,r.jsx)("div",{className:b,style:{minWidth:"".concat(i),maxWidth:"".concat(i)},children:n.map((function(e,t){return t<c?(0,r.jsx)("div",{className:y,children:(0,r.jsx)(w.A,{src:e,alt:"product image"})},t):t===n.length-1?(0,r.jsx)("div",{className:m,children:"..."},t):null}))})}var A="FwojpLT4",S="GJABBIlD",O="Y6cdnLSk",k=t(377);function P(e){var n,t,c,a,s,i=e.createdAt,l=e.price;return(0,r.jsxs)("div",{className:A,children:[(0,r.jsx)("div",{className:S,children:"Оформлено"}),(0,r.jsx)("div",{className:O,children:(n=i,t=new Date(n),c=t.getDate(),a=t.getMonth()+1,s=t.getFullYear(),"".concat(c," ").concat(["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][a-1]," ").concat(s))}),(0,r.jsx)("div",{className:S,children:"На сумму"}),(0,r.jsx)("div",{className:O,children:(0,r.jsx)(k.A,{price:l,size:"small"})})]})}var C="u_l5T5t9",E="YCi0AZh7",G="Vnr7ndL9",I="U6KBRG9S",L="SYURHIrm",M=t(488),Y=function(){return Y=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var c in n=arguments[t])Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c]);return e},Y.apply(this,arguments)},_=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)n.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(t[r[c]]=e[r[c]])}return t};function q(e){var n=e.closeModal,t=e.insert,c=e.overlay,a=_(e,["closeModal","insert","overlay"]),s=(0,f.useState)(!1),i=s[0],l=s[1];return(0,f.useEffect)((function(){l((function(e){return!e}))}),[]),(0,r.jsxs)(r.Fragment,{children:[c?(0,r.jsx)("div",{className:"".concat(G," ").concat(i?I:null)}):null,(0,r.jsxs)("div",Y({},a,{className:"".concat(C," ").concat(i?E:null),children:[(0,r.jsx)("div",{className:L,children:(0,r.jsx)(M.A,{show:i,onClick:function(){l((function(e){return!e})),setTimeout(n,300)}})}),t]}))]})}var T="rj2QeaFY",B="B2GV_QfM",D="p8ndClWd",R="nrdncTr0",V=t(536),W="rMz6zlin",z="aOJI7ovL",F="IwuS9ZSD",J="Sflb7SG0",H=t(767),K=t(523),U=t(207),Z=t(324);function Q(e){var n=e.data,t=n.product,c=t.id,a=t.title,s=t.price,i=t.picture,l=n.quantity,o=(0,H.Zp)();return(0,r.jsxs)("div",{className:W,onClick:function(){o("".concat(K.A.product(),"/").concat(c))},children:[(0,r.jsx)("div",{className:J,children:(0,r.jsx)(w.A,{src:i,alt:"product image"})}),(0,r.jsx)("div",{className:F,children:(0,r.jsx)(U.A,{text:a,view:"trancated"})}),(0,r.jsx)("div",{children:"".concat(l," шт")}),(0,r.jsx)("div",{className:z,children:(0,r.jsx)(Z.A,{price:s,quantity:l})})]})}var X=t(905);function $(e){var n=e.order,t=e.orderIndex,c=e.handleClickWidget,a=(0,s.jL)(),i=(0,f.useState)([]),l=i[0],o=i[1];return(0,f.useEffect)((function(){var e=n.map((function(e){return{id:e.product.id,quantity:e.quantity}}));o(e)}),[n]),(0,r.jsxs)("div",{className:R,children:[(0,r.jsxs)("h2",{className:B,children:["Состав заказа № ",t]}),(0,r.jsx)("ul",{className:D,children:n.map((function(e,n){return(0,r.jsx)("li",{children:(0,r.jsx)(Q,{data:e})},n)}))}),(0,r.jsx)("div",{className:T,children:(0,r.jsx)(X.A,{text:"Добавить в корзину",onClick:function(){c(),a((0,V.bE)(l))}})})]})}function ee(e){var n=e.order,t=e.orderNum,c=n.map((function(e){return e.product.picture})),a=(0,f.useState)(0),s=a[0],i=a[1],l=(0,h.A)(),o=l.isOpenPortal,p=l.openPortal,v=l.closePortal,x=l.Portal;return(0,f.useEffect)((function(){i(n.reduce((function(e,n){return e+n.quantity*n.product.price}),0))}),[n]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:u,onClick:p,children:[(0,r.jsxs)("div",{className:d,children:[(0,r.jsx)(j,{orderNum:t}),(0,r.jsx)(g,{pictures:c})]}),(0,r.jsx)("div",{className:d,children:(0,r.jsx)(P,{createdAt:n[0].createdAt,price:s})})]}),o&&(0,r.jsx)(x,{children:(0,r.jsx)(q,{insert:(0,r.jsx)($,{order:n,orderIndex:t,handleClickWidget:v}),overlay:!0,closeModal:v})})]})}var ne=function(e,n,t,r){return new(t||(t=Promise))((function(c,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?c(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},te=function(e,n){var t,r,c,a,s={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(t=1,r&&(c=2&i[0]?r.return:i[0]?r.throw||((c=r.return)&&c.call(r),0):r.next)&&!(c=c.call(r,i[1])).done)return c;switch(r=0,c&&(i=[2&i[0],c.value]),i[0]){case 0:case 1:c=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((c=(c=s.trys).length>0&&c[c.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!c||i[1]>c[0]&&i[1]<c[3])){s.label=i[1];break}if(6===i[0]&&s.label<c[1]){s.label=c[1],c=i;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(i);break}c[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],r=0}finally{t=c=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};function re(){var e=this,n=(0,s.jL)(),t=(0,s.GV)(l.Hw),u=(0,s.GV)(l.ee),d=(0,s.GV)(l.L6),f=d.limit,h=d.currentPage,p=d.totalOrders,v=(0,o.A)({func:function(){return ne(e,void 0,void 0,(function(){return te(this,(function(e){switch(e.label){case 0:return"successfully"===t&&p>f*(h-1)?[4,n((0,i.Gb)({page:h,limit:f}))]:[3,2];case 1:e.sent(),n((0,i.M2)()),e.label=2;case 2:return[2]}}))}))}}).targetElement;return(0,r.jsx)("section",{ref:v,className:c,children:(0,r.jsx)("div",{className:a,children:u.map((function(e,n){return(0,r.jsx)(ee,{order:e,orderNum:n+1},n)}))})})}}}]);
//# sourceMappingURL=21.aa00a8bef4e97100061b.js.map